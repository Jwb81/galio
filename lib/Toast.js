var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties"));var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _propTypes=_interopRequireDefault(require("prop-types"));var _=require(".");var _theme=_interopRequireWildcard(require("./theme"));var _jsxFileName="/Users/jasonbarnett/code/forks/galio/src/Toast.js";var _Dimensions$get=_reactNative.Dimensions.get('screen'),height=_Dimensions$get.height;var Toast=function(_Component){(0,_inherits2.default)(Toast,_Component);function Toast(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,Toast);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(Toast)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={isShow:_this.props.isShow,fadeAnim:new _reactNative.Animated.Value(0)};_this.setVisibility=function(isShow){return _this.setState({isShow:isShow});};_this.getTopPosition=function(){var _this$props=_this.props,positionIndicator=_this$props.positionIndicator,positionOffset=_this$props.positionOffset;if(positionIndicator==='top'){return positionOffset;}if(positionIndicator==='bottom'){return height-positionOffset;}return height/2;};_this.renderContent=function(){var _this$props2=_this.props,children=_this$props2.children,textStyle=_this$props2.textStyle;var textStyles=[styles.text,textStyle];if(typeof children==='string'){return _react.default.createElement(_.Text,{style:textStyles,__source:{fileName:_jsxFileName,lineNumber:108}},children);}return children;};return _this;}(0,_createClass2.default)(Toast,[{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this2=this;var _this$props3=this.props,isShow=_this$props3.isShow,fadeInDuration=_this$props3.fadeInDuration,fadeOutDuration=_this$props3.fadeOutDuration;var prevIsShow=prevProps.isShow;var fadeAnim=this.state.fadeAnim;if(!prevIsShow&&isShow){this.setVisibility(true);this.animation=_reactNative.Animated.timing(fadeAnim,{toValue:1,duration:fadeInDuration}).start();}if(prevIsShow&&!isShow){this.animation=_reactNative.Animated.timing(fadeAnim,{toValue:0,duration:fadeOutDuration}).start();this.visibilityTimeout=setTimeout(function(){_this2.setVisibility(false);},fadeOutDuration);}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.visibilityTimeout){clearTimeout(this.visibilityTimeout);}if(this.animation){this.animation.stop();}}},{key:"render",value:function render(){var _this$props4=this.props,theme=_this$props4.theme,color=_this$props4.color,round=_this$props4.round,style=_this$props4.style,styles=_this$props4.styles,rest=(0,_objectWithoutProperties2.default)(_this$props4,["theme","color","round","style","styles"]);var _this$state=this.state,isShow=_this$state.isShow,fadeAnim=_this$state.fadeAnim;var colorStyle=styles[color+"Color"];var toastStyles=[styles.toast,color&&colorStyle,color&&!colorStyle&&{backgroundColor:color},round&&{borderRadius:theme.SIZES.BASE*2},{top:this.getTopPosition(),opacity:fadeAnim},style];return isShow?_react.default.createElement(_reactNative.Animated.View,(0,_extends2.default)({style:toastStyles},rest,{__source:{fileName:_jsxFileName,lineNumber:131}}),this.renderContent()):null;}}]);return Toast;}(_react.Component);Toast.propTypes={children:_propTypes.default.node.isRequired,isShow:_propTypes.default.bool.isRequired,positionIndicator:_propTypes.default.oneOf(['top','center','bottom']),positionOffset:_propTypes.default.number,fadeInDuration:_propTypes.default.number,fadeOutDuration:_propTypes.default.number,color:_propTypes.default.oneOfType([_propTypes.default.oneOf(['primary','theme','info','error','warning','success']),_propTypes.default.string]),round:_propTypes.default.bool,style:_reactNative.ViewPropTypes.style,textStyle:_reactNative.ViewPropTypes.style,styles:_propTypes.default.any,theme:_propTypes.default.any};Toast.defaultProps={positionIndicator:'top',positionOffset:120,fadeInDuration:300,fadeOutDuration:300,color:'primary',round:false,style:null,textStyle:null,styles:{},theme:_theme.default};var styles=function styles(theme){return _reactNative.StyleSheet.create({toast:{padding:theme.SIZES.BASE,position:'absolute',left:0,right:0,zIndex:9999},text:{fontSize:theme.SIZES.FONT,color:theme.COLORS.WHITE},primaryColor:{backgroundColor:theme.COLORS.PRIMARY},themeColor:{backgroundColor:theme.COLORS.THEME},infoColor:{backgroundColor:theme.COLORS.INFO},errorColor:{backgroundColor:theme.COLORS.ERROR},warningColor:{backgroundColor:theme.COLORS.WARNING},successColor:{backgroundColor:theme.COLORS.SUCCESS}});};var _default=(0,_theme.withStyles)(Toast,styles);exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9Ub2FzdC5qcyJdLCJuYW1lcyI6WyJEaW1lbnNpb25zIiwiZ2V0IiwiaGVpZ2h0IiwiVG9hc3QiLCJzdGF0ZSIsImlzU2hvdyIsInByb3BzIiwiZmFkZUFuaW0iLCJBbmltYXRlZCIsIlZhbHVlIiwic2V0VmlzaWJpbGl0eSIsInNldFN0YXRlIiwiZ2V0VG9wUG9zaXRpb24iLCJwb3NpdGlvbkluZGljYXRvciIsInBvc2l0aW9uT2Zmc2V0IiwicmVuZGVyQ29udGVudCIsImNoaWxkcmVuIiwidGV4dFN0eWxlIiwidGV4dFN0eWxlcyIsInN0eWxlcyIsInRleHQiLCJwcmV2UHJvcHMiLCJmYWRlSW5EdXJhdGlvbiIsImZhZGVPdXREdXJhdGlvbiIsInByZXZJc1Nob3ciLCJhbmltYXRpb24iLCJ0aW1pbmciLCJ0b1ZhbHVlIiwiZHVyYXRpb24iLCJzdGFydCIsInZpc2liaWxpdHlUaW1lb3V0Iiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsInN0b3AiLCJ0aGVtZSIsImNvbG9yIiwicm91bmQiLCJzdHlsZSIsInJlc3QiLCJjb2xvclN0eWxlIiwidG9hc3RTdHlsZXMiLCJ0b2FzdCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlclJhZGl1cyIsIlNJWkVTIiwiQkFTRSIsInRvcCIsIm9wYWNpdHkiLCJDb21wb25lbnQiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJub2RlIiwiaXNSZXF1aXJlZCIsImJvb2wiLCJvbmVPZiIsIm51bWJlciIsIm9uZU9mVHlwZSIsInN0cmluZyIsIlZpZXdQcm9wVHlwZXMiLCJhbnkiLCJkZWZhdWx0UHJvcHMiLCJKYXl0ZWNoVGhlbWUiLCJTdHlsZVNoZWV0IiwiY3JlYXRlIiwicGFkZGluZyIsInBvc2l0aW9uIiwibGVmdCIsInJpZ2h0IiwiekluZGV4IiwiZm9udFNpemUiLCJGT05UIiwiQ09MT1JTIiwiV0hJVEUiLCJwcmltYXJ5Q29sb3IiLCJQUklNQVJZIiwidGhlbWVDb2xvciIsIlRIRU1FIiwiaW5mb0NvbG9yIiwiSU5GTyIsImVycm9yQ29sb3IiLCJFUlJPUiIsIndhcm5pbmdDb2xvciIsIldBUk5JTkciLCJzdWNjZXNzQ29sb3IiLCJTVUNDRVNTIl0sIm1hcHBpbmdzIjoiazVCQUFBLHFEQUNBLHlDQUNBLDZEQUVBLG1CQUNBLHVELHlGQUVtQkEsd0JBQVdDLEdBQVgsQ0FBZSxRQUFmLEMsQ0FBWEMsTSxpQkFBQUEsTSxJQUVGQyxDQUFBQSxLLGthQWdDSkMsSyxDQUFRLENBQ05DLE1BQU0sQ0FBRSxNQUFLQyxLQUFMLENBQVdELE1BRGIsQ0FFTkUsUUFBUSxDQUFFLEdBQUlDLHVCQUFTQyxLQUFiLENBQW1CLENBQW5CLENBRkosQyxPQTZDUkMsYSxDQUFnQixTQUFBTCxNQUFNLFFBQUksT0FBS00sUUFBTCxDQUFjLENBQUVOLE1BQU0sQ0FBTkEsTUFBRixDQUFkLENBQUosRSxPQUV0Qk8sYyxDQUFpQixVQUFNLGlCQUN5QixNQUFLTixLQUQ5QixDQUNiTyxpQkFEYSxhQUNiQSxpQkFEYSxDQUNNQyxjQUROLGFBQ01BLGNBRE4sQ0FHckIsR0FBSUQsaUJBQWlCLEdBQUssS0FBMUIsQ0FBaUMsQ0FDL0IsTUFBT0MsQ0FBQUEsY0FBUCxDQUNELENBRUQsR0FBSUQsaUJBQWlCLEdBQUssUUFBMUIsQ0FBb0MsQ0FDbEMsTUFBT1gsQ0FBQUEsTUFBTSxDQUFHWSxjQUFoQixDQUNELENBRUQsTUFBT1osQ0FBQUEsTUFBTSxDQUFHLENBQWhCLENBQ0QsQyxPQUVEYSxhLENBQWdCLFVBQU0sa0JBQ1ksTUFBS1QsS0FEakIsQ0FDWlUsUUFEWSxjQUNaQSxRQURZLENBQ0ZDLFNBREUsY0FDRkEsU0FERSxDQUVwQixHQUFNQyxDQUFBQSxVQUFVLENBQUcsQ0FBQ0MsTUFBTSxDQUFDQyxJQUFSLENBQWNILFNBQWQsQ0FBbkIsQ0FFQSxHQUFJLE1BQU9ELENBQUFBLFFBQVAsR0FBb0IsUUFBeEIsQ0FBa0MsQ0FDaEMsTUFBTyw4QkFBQyxNQUFELEVBQU0sS0FBSyxDQUFFRSxVQUFiLGtEQUEwQkYsUUFBMUIsQ0FB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Q0FEUyxDQVFoQmhELElBQUksQ0FBRSxDQUNKaUQsUUFBUSxDQUFFbkMsS0FBSyxDQUFDVSxLQUFOLENBQVkwQixJQURsQixDQUVKbkMsS0FBSyxDQUFFRCxLQUFLLENBQUNxQyxNQUFOLENBQWFDLEtBRmhCLENBUlUsQ0FZaEJDLFlBQVksQ0FBRSxDQUNaL0IsZUFBZSxDQUFFUixLQUFLLENBQUNxQyxNQUFOLENBQWFHLE9BRGxCLENBWkUsQ0FlaEJDLFVBQVUsQ0FBRSxDQUNWakMsZUFBZSxDQUFFUixLQUFLLENBQUNxQyxNQUFOLENBQWFLLEtBRHBCLENBZkksQ0FrQmhCQyxTQUFTLENBQUUsQ0FDVG5DLGVBQWUsQ0FBRVIsS0FBSyxDQUFDcUMsTUFBTixDQUFhTyxJQURyQixDQWxCSyxDQXFCaEJDLFVBQVUsQ0FBRSxDQUNWckMsZUFBZSxDQUFFUixLQUFLLENBQUNxQyxNQUFOLENBQWFTLEtBRHBCLENBckJJLENBd0JoQkMsWUFBWSxDQUFFLENBQ1p2QyxlQUFlLENBQUVSLEtBQUssQ0FBQ3FDLE1BQU4sQ0FBYVcsT0FEbEIsQ0F4QkUsQ0EyQmhCQyxZQUFZLENBQUUsQ0FDWnpDLGVBQWUsQ0FBRVIsS0FBSyxDQUFDcUMsTUFBTixDQUFhYSxPQURsQixDQTNCRSxDQUFsQixDQURrQixFQUFwQixDLGFBaUNlLHNCQUFXakYsS0FBWCxDQUFrQmdCLE1BQWxCLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRGltZW5zaW9ucywgU3R5bGVTaGVldCwgQW5pbWF0ZWQsIFZpZXdQcm9wVHlwZXMgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbi8vIGdhbGlvIGNvbXBvbmVudHNcbmltcG9ydCB7IFRleHQgfSBmcm9tICcuJztcbmltcG9ydCBKYXl0ZWNoVGhlbWUsIHsgd2l0aFN0eWxlcyB9IGZyb20gJy4vdGhlbWUnO1xuXG5jb25zdCB7IGhlaWdodCB9ID0gRGltZW5zaW9ucy5nZXQoJ3NjcmVlbicpO1xuXG5jbGFzcyBUb2FzdCBleHRlbmRzIENvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgY2hpbGRyZW46IFByb3BUeXBlcy5ub2RlLmlzUmVxdWlyZWQsXG4gICAgaXNTaG93OiBQcm9wVHlwZXMuYm9vbC5pc1JlcXVpcmVkLFxuICAgIHBvc2l0aW9uSW5kaWNhdG9yOiBQcm9wVHlwZXMub25lT2YoWyd0b3AnLCAnY2VudGVyJywgJ2JvdHRvbSddKSxcbiAgICBwb3NpdGlvbk9mZnNldDogUHJvcFR5cGVzLm51bWJlcixcbiAgICBmYWRlSW5EdXJhdGlvbjogUHJvcFR5cGVzLm51bWJlcixcbiAgICBmYWRlT3V0RHVyYXRpb246IFByb3BUeXBlcy5udW1iZXIsXG4gICAgY29sb3I6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgUHJvcFR5cGVzLm9uZU9mKFsncHJpbWFyeScsICd0aGVtZScsICdpbmZvJywgJ2Vycm9yJywgJ3dhcm5pbmcnLCAnc3VjY2VzcyddKSxcbiAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgXSksXG4gICAgcm91bmQ6IFByb3BUeXBlcy5ib29sLFxuICAgIHN0eWxlOiBWaWV3UHJvcFR5cGVzLnN0eWxlLFxuICAgIHRleHRTdHlsZTogVmlld1Byb3BUeXBlcy5zdHlsZSxcbiAgICBzdHlsZXM6IFByb3BUeXBlcy5hbnksXG4gICAgdGhlbWU6IFByb3BUeXBlcy5hbnksXG4gIH07XG5cbiAgc3RhdGljIGRlZmF1bHRQcm9wcyA9IHtcbiAgICBwb3NpdGlvbkluZGljYXRvcjogJ3RvcCcsXG4gICAgcG9zaXRpb25PZmZzZXQ6IDEyMCxcbiAgICBmYWRlSW5EdXJhdGlvbjogMzAwLFxuICAgIGZhZGVPdXREdXJhdGlvbjogMzAwLFxuICAgIGNvbG9yOiAncHJpbWFyeScsXG4gICAgcm91bmQ6IGZhbHNlLFxuICAgIHN0eWxlOiBudWxsLFxuICAgIHRleHRTdHlsZTogbnVsbCxcbiAgICBzdHlsZXM6IHt9LFxuICAgIHRoZW1lOiBKYXl0ZWNoVGhlbWUsXG4gIH07XG5cbiAgc3RhdGUgPSB7XG4gICAgaXNTaG93OiB0aGlzLnByb3BzLmlzU2hvdyxcbiAgICBmYWRlQW5pbTogbmV3IEFuaW1hdGVkLlZhbHVlKDApLFxuICB9O1xuXG4gIGFuaW1hdGlvbjtcblxuICB2aXNpYmlsaXR5VGltZW91dDtcblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzKSB7XG4gICAgY29uc3QgeyBpc1Nob3csIGZhZGVJbkR1cmF0aW9uLCBmYWRlT3V0RHVyYXRpb24gfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBpc1Nob3c6IHByZXZJc1Nob3cgfSA9IHByZXZQcm9wcztcbiAgICBjb25zdCB7IGZhZGVBbmltIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgaWYgKCFwcmV2SXNTaG93ICYmIGlzU2hvdykge1xuICAgICAgdGhpcy5zZXRWaXNpYmlsaXR5KHRydWUpO1xuXG4gICAgICB0aGlzLmFuaW1hdGlvbiA9IEFuaW1hdGVkLnRpbWluZyhmYWRlQW5pbSwge1xuICAgICAgICB0b1ZhbHVlOiAxLFxuICAgICAgICBkdXJhdGlvbjogZmFkZUluRHVyYXRpb24sXG4gICAgICB9KS5zdGFydCgpO1xuICAgIH1cblxuICAgIGlmIChwcmV2SXNTaG93ICYmICFpc1Nob3cpIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uID0gQW5pbWF0ZWQudGltaW5nKGZhZGVBbmltLCB7XG4gICAgICAgIHRvVmFsdWU6IDAsXG4gICAgICAgIGR1cmF0aW9uOiBmYWRlT3V0RHVyYXRpb24sXG4gICAgICB9KS5zdGFydCgpO1xuXG4gICAgICB0aGlzLnZpc2liaWxpdHlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0VmlzaWJpbGl0eShmYWxzZSk7XG4gICAgICB9LCBmYWRlT3V0RHVyYXRpb24pO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgIGlmICh0aGlzLnZpc2liaWxpdHlUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy52aXNpYmlsaXR5VGltZW91dCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYW5pbWF0aW9uKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbi5zdG9wKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0VmlzaWJpbGl0eSA9IGlzU2hvdyA9PiB0aGlzLnNldFN0YXRlKHsgaXNTaG93IH0pO1xuXG4gIGdldFRvcFBvc2l0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgcG9zaXRpb25JbmRpY2F0b3IsIHBvc2l0aW9uT2Zmc2V0IH0gPSB0aGlzLnByb3BzO1xuXG4gICAgaWYgKHBvc2l0aW9uSW5kaWNhdG9yID09PSAndG9wJykge1xuICAgICAgcmV0dXJuIHBvc2l0aW9uT2Zmc2V0O1xuICAgIH1cblxuICAgIGlmIChwb3NpdGlvbkluZGljYXRvciA9PT0gJ2JvdHRvbScpIHtcbiAgICAgIHJldHVybiBoZWlnaHQgLSBwb3NpdGlvbk9mZnNldDtcbiAgICB9XG5cbiAgICByZXR1cm4gaGVpZ2h0IC8gMjtcbiAgfTtcblxuICByZW5kZXJDb250ZW50ID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgY2hpbGRyZW4sIHRleHRTdHlsZSB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB0ZXh0U3R5bGVzID0gW3N0eWxlcy50ZXh0LCB0ZXh0U3R5bGVdO1xuXG4gICAgaWYgKHR5cGVvZiBjaGlsZHJlbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiA8VGV4dCBzdHlsZT17dGV4dFN0eWxlc30+e2NoaWxkcmVufTwvVGV4dD47XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoaWxkcmVuO1xuICB9O1xuXG4gIHJlbmRlcigpIHtcbiAgICBjb25zdCB7IHRoZW1lLCBjb2xvciwgcm91bmQsIHN0eWxlLCBzdHlsZXMsIC4uLnJlc3QgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBpc1Nob3csIGZhZGVBbmltIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IGNvbG9yU3R5bGUgPSBzdHlsZXNbYCR7Y29sb3J9Q29sb3JgXTtcbiAgICBjb25zdCB0b2FzdFN0eWxlcyA9IFtcbiAgICAgIHN0eWxlcy50b2FzdCxcbiAgICAgIGNvbG9yICYmIGNvbG9yU3R5bGUsXG4gICAgICBjb2xvciAmJiAhY29sb3JTdHlsZSAmJiB7IGJhY2tncm91bmRDb2xvcjogY29sb3IgfSxcbiAgICAgIHJvdW5kICYmIHsgYm9yZGVyUmFkaXVzOiB0aGVtZS5TSVpFUy5CQVNFICogMiB9LFxuICAgICAge1xuICAgICAgICB0b3A6IHRoaXMuZ2V0VG9wUG9zaXRpb24oKSxcbiAgICAgICAgb3BhY2l0eTogZmFkZUFuaW0sXG4gICAgICB9LFxuICAgICAgc3R5bGUsXG4gICAgXTtcblxuICAgIHJldHVybiBpc1Nob3cgPyAoXG4gICAgICA8QW5pbWF0ZWQuVmlldyBzdHlsZT17dG9hc3RTdHlsZXN9IHsuLi5yZXN0fT5cbiAgICAgICAge3RoaXMucmVuZGVyQ29udGVudCgpfVxuICAgICAgPC9BbmltYXRlZC5WaWV3PlxuICAgICkgOiBudWxsO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IHRoZW1lID0+XG4gIFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgICB0b2FzdDoge1xuICAgICAgcGFkZGluZzogdGhlbWUuU0laRVMuQkFTRSxcbiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgbGVmdDogMCxcbiAgICAgIHJpZ2h0OiAwLFxuICAgICAgekluZGV4OiA5OTk5LFxuICAgIH0sXG4gICAgdGV4dDoge1xuICAgICAgZm9udFNpemU6IHRoZW1lLlNJWkVTLkZPTlQsXG4gICAgICBjb2xvcjogdGhlbWUuQ09MT1JTLldISVRFLFxuICAgIH0sXG4gICAgcHJpbWFyeUNvbG9yOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLkNPTE9SUy5QUklNQVJZLFxuICAgIH0sXG4gICAgdGhlbWVDb2xvcjoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5DT0xPUlMuVEhFTUUsXG4gICAgfSxcbiAgICBpbmZvQ29sb3I6IHtcbiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhlbWUuQ09MT1JTLklORk8sXG4gICAgfSxcbiAgICBlcnJvckNvbG9yOiB7XG4gICAgICBiYWNrZ3JvdW5kQ29sb3I6IHRoZW1lLkNPTE9SUy5FUlJPUixcbiAgICB9LFxuICAgIHdhcm5pbmdDb2xvcjoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5DT0xPUlMuV0FSTklORyxcbiAgICB9LFxuICAgIHN1Y2Nlc3NDb2xvcjoge1xuICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGVtZS5DT0xPUlMuU1VDQ0VTUyxcbiAgICB9LFxuICB9KTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFN0eWxlcyhUb2FzdCwgc3R5bGVzKTtcbiJdfQ==