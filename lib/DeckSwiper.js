var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _toConsumableArray2=_interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireDefault(require("react"));var _reactNative=require("react-native");var _propTypes=_interopRequireDefault(require("prop-types"));var _Block=_interopRequireDefault(require("./Block"));var _jsxFileName="/Users/jasonbarnett/code/forks/galio/src/DeckSwiper.js";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){(0,_defineProperty2.default)(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}var _Dimensions$get=_reactNative.Dimensions.get('screen'),SCREEN_WIDTH=_Dimensions$get.width;function DeckSwiper(_ref){var onSwipeRight=_ref.onSwipeRight,onSwipeLeft=_ref.onSwipeLeft,focusedElementStyle=_ref.focusedElementStyle,nextElementStyle=_ref.nextElementStyle,components=_ref.components,style=_ref.style;var _React$useState=_react.default.useState(0),_React$useState2=(0,_slicedToArray2.default)(_React$useState,2),currentIndex=_React$useState2[0],setCurrentIndex=_React$useState2[1];var position=new _reactNative.Animated.ValueXY();var rotate=position.x.interpolate({inputRange:[-SCREEN_WIDTH/2,0,SCREEN_WIDTH/2],outputRange:["-10deg","0deg","10deg"],extrapolate:"clamp"});var rotateAndTranslate={transform:[{rotate:rotate}].concat((0,_toConsumableArray2.default)(position.getTranslateTransform()))};var nextCardOpacity=position.x.interpolate({inputRange:[-SCREEN_WIDTH/2,0,SCREEN_WIDTH/2],outputRange:[1,0,1],extrapolate:"clamp"});var nextCardScale=position.x.interpolate({inputRange:[-SCREEN_WIDTH/2,0,SCREEN_WIDTH/2],outputRange:[1,0.8,1],extrapolate:"clamp"});var panResponder=_reactNative.PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(evt,gestureState){return true;},onPanResponderMove:function onPanResponderMove(evt,gestureState){position.setValue({x:gestureState.dx,y:gestureState.dy});},onPanResponderRelease:function onPanResponderRelease(evt,gestureState){if(gestureState.dx>110){_reactNative.Animated.spring(position,{toValue:{x:SCREEN_WIDTH+100,y:gestureState.dy}}).start(function(){setCurrentIndex(currentIndex+1);});if(onSwipeRight)onSwipeRight();}else if(gestureState.dx<-110){_reactNative.Animated.spring(position,{toValue:{x:-SCREEN_WIDTH-100,y:gestureState.dy}}).start(function(){setCurrentIndex(currentIndex+1);});if(onSwipeLeft)onSwipeLeft();}else{_reactNative.Animated.spring(position,{toValue:{x:0,y:0},friction:4}).start();}}});_react.default.useEffect(function(){position.setValue({x:0,y:0});},[currentIndex]);function renderComponents(components){return components.map(function(item,i){if(i<currentIndex){return null;}else if(i==currentIndex){return _react.default.createElement(_reactNative.Animated.View,(0,_extends2.default)({key:i,style:[rotateAndTranslate,_objectSpread({},_reactNative.StyleSheet.absoluteFillObject),focusedElementStyle]},panResponder.panHandlers,{__source:{fileName:_jsxFileName,lineNumber:91}}),item);}else{return _react.default.createElement(_reactNative.Animated.View,{key:i,style:[_objectSpread({opacity:nextCardOpacity,transform:[{scale:nextCardScale}]},_reactNative.StyleSheet.absoluteFillObject),nextElementStyle],__source:{fileName:_jsxFileName,lineNumber:107}},item);}}).reverse();}return _react.default.createElement(_Block.default,{flex:true,center:true,style:[{width:SCREEN_WIDTH*0.7},style],__source:{fileName:_jsxFileName,lineNumber:122}},renderComponents(components));}DeckSwiper.propTypes={components:_propTypes.default.array.isRequired,onSwipeRight:_propTypes.default.func,onSwipeLeft:_propTypes.default.func,focusedElementStyle:_propTypes.default.any,nextElementStyle:_propTypes.default.any,style:_propTypes.default.any};var _default=DeckSwiper;exports.default=_default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9EZWNrU3dpcGVyLmpzIl0sIm5hbWVzIjpbIkRpbWVuc2lvbnMiLCJnZXQiLCJTQ1JFRU5fV0lEVEgiLCJ3aWR0aCIsIkRlY2tTd2lwZXIiLCJvblN3aXBlUmlnaHQiLCJvblN3aXBlTGVmdCIsImZvY3VzZWRFbGVtZW50U3R5bGUiLCJuZXh0RWxlbWVudFN0eWxlIiwiY29tcG9uZW50cyIsInN0eWxlIiwiUmVhY3QiLCJ1c2VTdGF0ZSIsImN1cnJlbnRJbmRleCIsInNldEN1cnJlbnRJbmRleCIsInBvc2l0aW9uIiwiQW5pbWF0ZWQiLCJWYWx1ZVhZIiwicm90YXRlIiwieCIsImludGVycG9sYXRlIiwiaW5wdXRSYW5nZSIsIm91dHB1dFJhbmdlIiwiZXh0cmFwb2xhdGUiLCJyb3RhdGVBbmRUcmFuc2xhdGUiLCJ0cmFuc2Zvcm0iLCJnZXRUcmFuc2xhdGVUcmFuc2Zvcm0iLCJuZXh0Q2FyZE9wYWNpdHkiLCJuZXh0Q2FyZFNjYWxlIiwicGFuUmVzcG9uZGVyIiwiUGFuUmVzcG9uZGVyIiwiY3JlYXRlIiwib25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlciIsImV2dCIsImdlc3R1cmVTdGF0ZSIsIm9uUGFuUmVzcG9uZGVyTW92ZSIsInNldFZhbHVlIiwiZHgiLCJ5IiwiZHkiLCJvblBhblJlc3BvbmRlclJlbGVhc2UiLCJzcHJpbmciLCJ0b1ZhbHVlIiwic3RhcnQiLCJmcmljdGlvbiIsInVzZUVmZmVjdCIsInJlbmRlckNvbXBvbmVudHMiLCJtYXAiLCJpdGVtIiwiaSIsIlN0eWxlU2hlZXQiLCJhYnNvbHV0ZUZpbGxPYmplY3QiLCJwYW5IYW5kbGVycyIsIm9wYWNpdHkiLCJzY2FsZSIsInJldmVyc2UiLCJwcm9wVHlwZXMiLCJQcm9wVHlwZXMiLCJhcnJheSIsImlzUmVxdWlyZWQiLCJmdW5jIiwiYW55Il0sIm1hcHBpbmdzIjoiaWhCQUFBLG9EQUNBLHlDQU1BLDZEQUVBLHNELHU0QkFFZ0NBLHdCQUFXQyxHQUFYLENBQWUsUUFBZixD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VCxFQVNNc0IsWUFBWSxDQUFDdUIsV0FUbkIsbURBV0dKLElBWEgsQ0FERixDQWVELENBaEJLLElBZ0JELENBQ0gsTUFDRSw4QkFBQyxxQkFBRCxDQUFVLElBQVYsRUFDRSxHQUFHLENBQUVDLENBRFAsQ0FFRSxLQUFLLENBQUUsZ0JBQ0xJLE9BQU8sQ0FBRTFCLGVBREosQ0FFTEYsU0FBUyxDQUFFLENBQUMsQ0FBRTZCLEtBQUssQ0FBRTFCLGFBQVQsQ0FBRCxDQUZOLEVBR0ZzQix3QkFBV0Msa0JBSFQsRUFJSjNDLGdCQUpJLENBRlQsa0RBUUd3QyxJQVJILENBREYsQ0FZRCxDQUNGLENBakNNLEVBaUNKTyxPQWpDSSxFQUFQLENBa0NELENBQ0QsTUFDRSw4QkFBQyxjQUFELEVBQU8sSUFBSSxLQUFYLENBQVksTUFBTSxLQUFsQixDQUFtQixLQUFLLENBQUUsQ0FBQyxDQUFFcEQsS0FBSyxDQUFFRCxZQUFZLENBQUcsR0FBeEIsQ0FBRCxDQUFnQ1EsS0FBaEMsQ0FBMUIsa0RBQ0tvQyxnQkFBZ0IsQ0FBQ3JDLFVBQUQsQ0FEckIsQ0FERixDQUtELENBRURMLFVBQVUsQ0FBQ29ELFNBQVgsQ0FBdUIsQ0FDckIvQyxVQUFVLENBQUVnRCxtQkFBVUMsS0FBVixDQUFnQkMsVUFEUCxDQUVyQnRELFlBQVksQ0FBRW9ELG1CQUFVRyxJQUZILENBR3JCdEQsV0FBVyxDQUFFbUQsbUJBQVVHLElBSEYsQ0FJckJyRCxtQkFBbUIsQ0FBRWtELG1CQUFVSSxHQUpWLENBS3JCckQsZ0JBQWdCLENBQUVpRCxtQkFBVUksR0FMUCxDQU1yQm5ELEtBQUssQ0FBRStDLG1CQUFVSSxHQU5JLENBQXZCLEMsYUFTZXpELFUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHtcbiAgU3R5bGVTaGVldCxcbiAgRGltZW5zaW9ucyxcbiAgQW5pbWF0ZWQsXG4gIFBhblJlc3BvbmRlcixcbn0gZnJvbSAncmVhY3QtbmF0aXZlJztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG5cbmltcG9ydCBCbG9jayBmcm9tICcuL0Jsb2NrJztcblxuY29uc3QgeyB3aWR0aDogU0NSRUVOX1dJRFRIIH0gPSBEaW1lbnNpb25zLmdldCgnc2NyZWVuJyk7XG5cbmZ1bmN0aW9uIERlY2tTd2lwZXIoe1xuICBvblN3aXBlUmlnaHQsXG4gIG9uU3dpcGVMZWZ0LFxuICBmb2N1c2VkRWxlbWVudFN0eWxlLFxuICBuZXh0RWxlbWVudFN0eWxlLFxuICBjb21wb25lbnRzLFxuICBzdHlsZVxufSkge1xuICBjb25zdCBbY3VycmVudEluZGV4LCBzZXRDdXJyZW50SW5kZXhdID0gUmVhY3QudXNlU3RhdGUoMCk7XG4gIGNvbnN0IHBvc2l0aW9uID0gbmV3IEFuaW1hdGVkLlZhbHVlWFkoKTtcblxuICBjb25zdCByb3RhdGUgPSBwb3NpdGlvbi54LmludGVycG9sYXRlKHtcbiAgICBpbnB1dFJhbmdlOiBbLVNDUkVFTl9XSURUSCAvIDIsIDAsIFNDUkVFTl9XSURUSCAvIDJdLFxuICAgIG91dHB1dFJhbmdlOiBbXCItMTBkZWdcIiwgXCIwZGVnXCIsIFwiMTBkZWdcIl0sXG4gICAgZXh0cmFwb2xhdGU6IFwiY2xhbXBcIlxuICB9KTtcblxuICBjb25zdCByb3RhdGVBbmRUcmFuc2xhdGUgPSB7XG4gICAgdHJhbnNmb3JtOiBbXG4gICAgICB7XG4gICAgICAgIHJvdGF0ZTogcm90YXRlXG4gICAgICB9LFxuICAgICAgLi4ucG9zaXRpb24uZ2V0VHJhbnNsYXRlVHJhbnNmb3JtKClcbiAgICBdXG4gIH07XG5cbiAgY29uc3QgbmV4dENhcmRPcGFjaXR5ID0gcG9zaXRpb24ueC5pbnRlcnBvbGF0ZSh7XG4gICAgaW5wdXRSYW5nZTogWy1TQ1JFRU5fV0lEVEggLyAyLCAwLCBTQ1JFRU5fV0lEVEggLyAyXSxcbiAgICBvdXRwdXRSYW5nZTogWzEsIDAsIDFdLFxuICAgIGV4dHJhcG9sYXRlOiBcImNsYW1wXCJcbiAgfSk7XG5cbiAgY29uc3QgbmV4dENhcmRTY2FsZSA9IHBvc2l0aW9uLnguaW50ZXJwb2xhdGUoe1xuICAgIGlucHV0UmFuZ2U6IFstU0NSRUVOX1dJRFRIIC8gMiwgMCwgU0NSRUVOX1dJRFRIIC8gMl0sXG4gICAgb3V0cHV0UmFuZ2U6IFsxLCAwLjgsIDFdLFxuICAgIGV4dHJhcG9sYXRlOiBcImNsYW1wXCJcbiAgfSk7XG5cbiAgY29uc3QgcGFuUmVzcG9uZGVyID0gUGFuUmVzcG9uZGVyLmNyZWF0ZSh7XG4gICAgb25TdGFydFNob3VsZFNldFBhblJlc3BvbmRlcjogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB0cnVlLFxuICAgIG9uUGFuUmVzcG9uZGVyTW92ZTogKGV2dCwgZ2VzdHVyZVN0YXRlKSA9PiB7XG4gICAgICBwb3NpdGlvbi5zZXRWYWx1ZSh7IHg6IGdlc3R1cmVTdGF0ZS5keCwgeTogZ2VzdHVyZVN0YXRlLmR5IH0pO1xuICAgIH0sXG4gICAgb25QYW5SZXNwb25kZXJSZWxlYXNlOiAoZXZ0LCBnZXN0dXJlU3RhdGUpID0+IHtcbiAgICAgIGlmKGdlc3R1cmVTdGF0ZS5keCA+IDExMCkge1xuICAgICAgICBBbmltYXRlZC5zcHJpbmcocG9zaXRpb24sIHtcbiAgICAgICAgICB0b1ZhbHVlOiB7IHg6IFNDUkVFTl9XSURUSCArIDEwMCwgeTogZ2VzdHVyZVN0YXRlLmR5IH1cbiAgICAgICAgfSkuc3RhcnQoKCkgPT4ge1xuICAgICAgICAgIHNldEN1cnJlbnRJbmRleChjdXJyZW50SW5kZXggKyAxKTtcbiAgICAgICAgfSk7XG4gICAgICAgaWYob25Td2lwZVJpZ2h0KSBvblN3aXBlUmlnaHQoKTtcbiAgICAgIH1lbHNlIGlmKGdlc3R1cmVTdGF0ZS5keCA8IC0xMTApIHtcbiAgICAgICAgQW5pbWF0ZWQuc3ByaW5nKHBvc2l0aW9uLCB7XG4gICAgICAgICAgdG9WYWx1ZTogeyB4OiAtU0NSRUVOX1dJRFRIIC0gMTAwLCB5OiBnZXN0dXJlU3RhdGUuZHkgfVxuICAgICAgICB9KS5zdGFydCgoKSA9PiB7XG4gICAgICAgICAgc2V0Q3VycmVudEluZGV4KGN1cnJlbnRJbmRleCArIDEpO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYob25Td2lwZUxlZnQpIG9uU3dpcGVMZWZ0KCk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgQW5pbWF0ZWQuc3ByaW5nKHBvc2l0aW9uLCB7XG4gICAgICAgICAgdG9WYWx1ZTogeyB4OiAwLCB5OiAwIH0sXG4gICAgICAgICAgZnJpY3Rpb246IDRcbiAgICAgICAgfSkuc3RhcnQoKTtcbiAgICAgIH1cbiAgICB9LFxuICB9KTtcblxuICBSZWFjdC51c2VFZmZlY3QoKCkgPT4ge1xuICAgIHBvc2l0aW9uLnNldFZhbHVlKHsgeDogMCwgeTogMCB9KTtcbiAgfSwgW2N1cnJlbnRJbmRleF0pO1xuXG4gIGZ1bmN0aW9uIHJlbmRlckNvbXBvbmVudHMoY29tcG9uZW50cykge1xuICAgIHJldHVybiBjb21wb25lbnRzLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgaWYoaSA8IGN1cnJlbnRJbmRleCkge1xuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfWVsc2UgaWYoaSA9PSBjdXJyZW50SW5kZXgpe1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxBbmltYXRlZC5WaWV3XG4gICAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgICByb3RhdGVBbmRUcmFuc2xhdGUsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAuLi5TdHlsZVNoZWV0LmFic29sdXRlRmlsbE9iamVjdFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBmb2N1c2VkRWxlbWVudFN0eWxlXG4gICAgICAgICAgICBdfVxuICAgICAgICAgICAgey4uLnBhblJlc3BvbmRlci5wYW5IYW5kbGVyc31cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7aXRlbX1cbiAgICAgICAgICA8L0FuaW1hdGVkLlZpZXc+XG4gICAgICAgICk7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICA8QW5pbWF0ZWQuVmlld1xuICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgc3R5bGU9e1t7XG4gICAgICAgICAgICAgIG9wYWNpdHk6IG5leHRDYXJkT3BhY2l0eSxcbiAgICAgICAgICAgICAgdHJhbnNmb3JtOiBbeyBzY2FsZTogbmV4dENhcmRTY2FsZSB9XSxcbiAgICAgICAgICAgICAgLi4uU3R5bGVTaGVldC5hYnNvbHV0ZUZpbGxPYmplY3RcbiAgICAgICAgICAgIH0sIG5leHRFbGVtZW50U3R5bGVdfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHtpdGVtfVxuICAgICAgICAgIDwvQW5pbWF0ZWQuVmlldz5cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KS5yZXZlcnNlKCk7XG4gIH1cbiAgcmV0dXJuIChcbiAgICA8QmxvY2sgZmxleCBjZW50ZXIgc3R5bGU9e1t7IHdpZHRoOiBTQ1JFRU5fV0lEVEggKiAwLjcgfSwgc3R5bGVdfT5cbiAgICAgICAge3JlbmRlckNvbXBvbmVudHMoY29tcG9uZW50cyl9XG4gICAgPC9CbG9jaz5cbiAgKTtcbn1cblxuRGVja1N3aXBlci5wcm9wVHlwZXMgPSB7XG4gIGNvbXBvbmVudHM6IFByb3BUeXBlcy5hcnJheS5pc1JlcXVpcmVkLFxuICBvblN3aXBlUmlnaHQ6IFByb3BUeXBlcy5mdW5jLCBcbiAgb25Td2lwZUxlZnQ6IFByb3BUeXBlcy5mdW5jLFxuICBmb2N1c2VkRWxlbWVudFN0eWxlOiBQcm9wVHlwZXMuYW55LFxuICBuZXh0RWxlbWVudFN0eWxlOiBQcm9wVHlwZXMuYW55LFxuICBzdHlsZTogUHJvcFR5cGVzLmFueVxufVxuXG5leHBvcnQgZGVmYXVsdCBEZWNrU3dpcGVyOyJdfQ==